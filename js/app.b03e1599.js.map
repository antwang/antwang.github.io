{"version":3,"file":"js/app.b03e1599.js","mappings":"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","sources":["webpack://pwa_vue3/./src/utils/common.js","webpack://pwa_vue3/./src/utils/notification.js","webpack://pwa_vue3/./src/components/HelloWorld.vue","webpack://pwa_vue3/./src/components/HelloWorld.vue?bd04","webpack://pwa_vue3/./src/App.vue","webpack://pwa_vue3/./src/registerServiceWorker.js","webpack://pwa_vue3/./src/main.js","webpack://pwa_vue3/webpack/bootstrap","webpack://pwa_vue3/webpack/runtime/chunk loaded","webpack://pwa_vue3/webpack/runtime/compat get default export","webpack://pwa_vue3/webpack/runtime/define property getters","webpack://pwa_vue3/webpack/runtime/global","webpack://pwa_vue3/webpack/runtime/hasOwnProperty shorthand","webpack://pwa_vue3/webpack/runtime/jsonp chunk loading","webpack://pwa_vue3/webpack/startup"],"sourcesContent":["/*\n * @Author: ant\n * @Date: 2022-06-01 10:48:36\n * @LastEditTime: 2022-06-01 16:01:29\n * @LastEditors: ant\n * @Description: \n */\n\n/**\n * @description: uint8Array转base64\n * @param {Uint8Array} arr\n * @return {base64String}\n */\nexport const uint8ArrayToBase64 = (arr) => {\n    return btoa(String.fromCharCode.apply(null, new Uint8Array(arr)))\n}\n/**\n * @description: base64 转 uint8Array\n * @param {base64String} base64String\n * @return {Uint8Array}\n */\nexport const base64ToUint8Array = (base64String) => {\n    let padding = '='.repeat((4 - base64String.length % 4) % 4)\n    let base64 = (base64String + padding)\n        .replace(/-/g, '+')\n        .replace(/_/g, '/')\n    let rawData = atob(base64)\n    let outputArray = new Uint8Array(rawData.length)\n    for (let i = 0; i < rawData.length; i++) {\n        outputArray[i] = rawData.charCodeAt(i)\n    }\n    return outputArray\n}","/*\n * @Author: ant\n * @Date: 2022-05-30 22:54:24\n * @LastEditTime: 2022-06-08 23:43:39\n * @LastEditors: ant\n * @Description: \n */\nimport { uint8ArrayToBase64 } from './common'\n// 服务器公钥，正式环境中，改为从服务端接口获取\n/**\n * @description: 判断是否支持 Notification API\n * @return {Boolean} \n */\nconst isNotificationSupported = () => {\n    return 'Notification' in window\n}\n/**\n * @description: 判断是否支持 Push API\n * @return {Boolean} \n */\nconst isPushManagerSupported = () => {\n    return 'PushManager' in window\n}\n\n/**\n * @description: 获取SW注册对象\n * @return {SWRegistration} \n */\nconst getSWRegistration = async () => {\n    let reg = await navigator.serviceWorker.ready\n    console.log(`获取当前active的SWRegistration`, reg)\n    return reg\n}\n/**\n * @description: 向用户发起授权通知\n * @return {String} 用户授权结果 granted denied default\n */\nexport const askPermission = async () => {\n    if (!isNotificationSupported()) {\n        console.log('当前浏览器不支持 Notification API .');\n        return null\n    }\n    try {\n        let permission = await Notification.requestPermission()\n        console.log(permission)\n        return permission\n    } catch (e) {\n        console.log(`获取授权失败`, e)\n        return null\n    }\n}\n/**\n * @description: 展示通知\n * @param {JSON} msg 一个消息体对象 {title: 'xxx', body: {icon,body,image,...}}\n * @return {*} void\n */\nexport const displayNotification = async (msg) => {\n    let permission = await askPermission();\n    if (permission === 'granted') {\n        let reg = await getSWRegistration()\n        reg.showNotification(msg.title, msg.body);\n    }\n}\n\n/**\n * @description: 获取消息通知用户授权状态\n * @return {String} \n */\nexport const getNotificationPermissionState = async () => {\n    if (navigator.permissions) {\n        try {\n            let res = await navigator.permissions.query({ name: 'notifications' })\n            return res.state\n        } catch (e) {\n            console.log(`权限状态获取失败`, e)\n            return null\n        }\n    }\n    // fallback Notification.permission 会阻塞主线程，频繁调用影响性能\n    return Notification.permission\n}\n/**\n * @description: 获取pushScription对象\n * @return {pushScription}\n */\nexport const getPushScription = async () => {\n    if (!isPushManagerSupported()) {\n        console.log('系统不支持PushManager API')\n        return\n    }\n    try {\n        let reg = await getSWRegistration()\n        let subscription = await reg.pushManager.getSubscription()\n        return subscription\n    } catch (e) {\n        console.log(`获取pushScription失败`, e)\n        return null\n    }\n}\n\n/**\n * @description: 订阅推送消息\n * @param {Object} subscribeOptions \n * @return {pushSubscription} \n */\nexport const subscribe = async (subscribeOptions = { userVisibleOnly: true }) => {\n    if (!isPushManagerSupported()) {\n        console.log('系统不支持 PushManager API .')\n        return null\n    }\n    try {\n        let permission = await askPermission();\n        if (permission === 'granted') {\n            let reg = await getSWRegistration()\n            let subscription = await reg.pushManager.subscribe(subscribeOptions)\n            console.log(`订阅成功`, JSON.stringify(subscription))\n            return subscription\n        }\n    } catch (e) {\n        console.log(`订阅失败`, e)\n        return null\n    }\n}\n\n/**\n * @description: 取消订阅\n * @return {void} \n */\nexport const unsubscribe = async (pushSubScription) => {\n    if (!isPushManagerSupported()) {\n        console.log('系统不支持 PushManager API .')\n        return\n    }\n    try {\n        let res = await pushSubScription.unsubscribe()\n        res?console.log(`订阅取消成功`): console.log(`订阅取消失败`)\n        return res\n    } catch (e) {\n        console.log(`订阅取消失败`, e)\n        return false\n    }\n}\nexport const sendPushSubscription = (pushScription) => {\n    return fetch('/api/push/subscribe', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            endpoint: pushScription.endpoint,\n            keys: {\n                p256dh: uint8ArrayToBase64(pushScription.getKey('p256dh')),\n                auth: uint8ArrayToBase64(pushScription.getKey('auth'))\n            }\n        })\n    })\n}","<!--\n * @Author: ant\n * @Date: 2022-05-25 22:40:23\n * @LastEditTime: 2022-06-08 23:40:24\n * @LastEditors: ant\n * @Description: \n-->\n<script setup>\nimport { onMounted, ref } from \"vue\";\nimport { Button } from \"vant\";\nimport {\n  displayNotification,\n  subscribe,\n  unsubscribe,\n  getPushScription,\n} from \"../utils/notification\";\nimport { base64ToUint8Array } from \"@/utils/common\";\n// 业务中需要掉用此接口，将pushScription 发送给业务服务器。业务服务器需要pushScription向推送服务器推送消息。\n// const sendPushSubscription = (pushScription)=>{\n//   return fetch('/api/push/subscribe', {\n//         method: 'POST',\n//         headers: {\n//             'Content-Type': 'application/json'\n//         },\n//         body: JSON.stringify({\n//             endpoint: pushScription.endpoint,\n//             keys: {\n//                 p256dh: uint8ArrayToBase64(pushScription.getKey('p256dh')),\n//                 auth: uint8ArrayToBase64(pushScription.getKey('auth'))\n//             }\n//         })\n//     })\n// }\nconst msgs = [\n  {\n    title: \"我是简单的消息\",\n    body: {\n      body: \"我是本地消息的内容体，我是本地消息的内容体\",\n      icon: \"/img/icons/android-chrome-192x192.png\",\n    },\n  },\n  {\n    title: \"我是带操作按钮的消息\",\n    body: {\n      body: \"我是带有操作按钮的消息，我是带有操作按钮的消息，我是带有操作按钮的消息，我是带有操作按钮的消息。\",\n      icon: \"/img/icons/android-chrome-192x192.png\",\n      data: {\n        url: \"https://tenfei01.cfp.cn/creative/vcg/800/version23/VCG21154786fd8.jpg\",\n        desc: \"我是城市风景照\",\n      },\n      actions: [\n        {\n          action: \"detail\",\n          title: \"查看\",\n          icon: \"/img/icons/apple-touch-icon.png\",\n        },\n        {\n          action: \"cancel\",\n          title: \"取消\",\n          icon: \"/img/icons/apple-touch-icon.png\",\n        },\n      ],\n    },\n  },\n  {\n    title: \"我是标题\",\n    body: {\n      body: \"我是本地消息的内容体，我是本地消息的内容体\",\n      icon: \"/img/icons/android-chrome-192x192.png\",\n      data: {\n        url: \"https://tenfei01.cfp.cn/creative/vcg/800/version23/VCG21154786fd8.jpg\",\n        desc: \"我是城市风景照\",\n      },\n    },\n  },\n];\n// 使用web-push生成的key\n// const VAPIDPublicKey =\n//   \"BPAlVBGt3YFzGBTOjrCbNVk5Q-2zkETpExGRO00CmyS3FqLI9LSGZHu4fJhIz0sObXwK88ArqZQdGpv51h3NbZg\";\n// 当前使用https://web-push-codelab.glitch.me/  工具提供的key，便于在线进行推送测试\nconst VAPIDPublicKey =\n  \"BN5zsRBSCmX9EjFkK-hoaSlukY-H8cBG5xuAhHi6SHH2EuLFGQpHxhLPYkZBVw8Cxc5udX8RZEpaKIOxuGV4vrk\";\nlet savedPrompt = null;\nconst showInstallation = ref(false);\nlet pushInfo = ref(\"\");\nlet subscribeText = ref(\"订阅\");\nlet pushSub = null;\nonMounted(async () => {\n  pushSub = await getPushScription();\n  if (pushSub) {\n    subscribeText.value = \"取消订阅\";\n    pushInfo.value = JSON.stringify(pushSub);\n  } else {\n    subscribeText.value = \"订阅\";\n    pushInfo.value = \"\";\n  }\n});\n\nconst subscribeOrUnsubscribe = async () => {\n  console.log(`pushSub的值为：`,pushSub)\n  if (pushSub) {\n    // 取消订阅\n    let res = await unsubscribe(pushSub);\n    if (res) {\n      pushInfo.value = \"\";\n      subscribeText.value = \"订阅\";\n    }\n  } else {\n    // 去订阅\n    pushSub = await subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: base64ToUint8Array(VAPIDPublicKey),\n    });\n    if (pushSub) {\n      pushInfo.value = JSON.stringify(pushSub);\n      subscribeText.value = \"取消订阅\";\n    }\n  }\n};\nconst showMsg = (i) => displayNotification(msgs[i]);\n\nwindow.addEventListener(\"beforeinstallprompt\", async (e) => {\n  // 阻止默认提示弹出\n  e.preventDefault();\n  // 把事件存起来\n  savedPrompt = e;\n  // 展示引导banner\n  showInstallation.value = true;\n  let res = await e.userChoice;\n  let { outcome } = res;\n  console.log(res);\n  console.log(outcome);\n  if (outcome == \"accepted\" || res == \"accepted\") {\n    // 隐藏按钮\n    showInstallation.value = false;\n    // 用户将站点添加到桌面\n    console.log(\"已经添加到桌面\");\n  } else {\n    // 用户取消操作\n    console.log(\"用户取消安装\");\n  }\n});\n\nwindow.addEventListener(\"appinstalled\", () => {\n  console.log(\"PWA 应用已经在你的桌面啦\");\n  savedPrompt = null;\n});\nconst addAToHomeScreen = async () => {\n  // 触发安装提示展现，userChoice 属性是根据用户的选择进行解析的承诺。您只能调用延迟事件的 prompt() 一次。如果用户关闭了它，您需要等到 beforeinstallprompt 事件被再次触发，通常是在 userChoice 属性解析后立即触发。\n  if (savedPrompt) {\n    savedPrompt.prompt();\n    let { outcome } = await savedPrompt.userChoice;\n    // 用户操作之后清空事件\n    savedPrompt = null;\n    if (outcome == \"accept\" || outcome == \"accepted\") {\n      // 隐藏按钮\n      showInstallation.value = false;\n      // 用户将站点添加到桌面\n      console.log(\"已经添加到桌面\");\n    } else {\n      // 用户取消操作\n      console.log(\"用户取消安装\");\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"hello\">\n    <h3>PWA应用功能清单</h3>\n    <ul>\n      <li>添加到桌面</li>\n      <li>消息通知</li>\n      <li>离线可用</li>\n      <li>缓存</li>\n    </ul>\n\n    <section class=\"card\">\n      <h3>本地通知</h3>\n      <p>该通知是用户在本地交互所产生，例如，点击下方按钮，会展示一条通知：</p>\n      <div class=\"op-box\">\n        <Button type=\"success\" @click=\"showMsg(0)\">发送通知</Button>\n      </div>\n    </section>\n\n    <section class=\"card\">\n      <h3>有操作按钮的通知</h3>\n      <p>该通知会带有两个操作按钮，一个是查看，一个是取消：</p>\n      <div class=\"op-box\">\n        <Button type=\"success\" @click=\"showMsg(1)\">发送通知</Button>\n      </div>\n    </section>\n\n    <section class=\"card\">\n      <h3>消息推送</h3>\n      <p>消息推送信息对象：</p>\n      <p>{{ pushInfo }}</p>\n      <div class=\"op-box\">\n        <Button type=\"success\" @click=\"subscribeOrUnsubscribe\">{{\n          subscribeText\n        }}</Button>\n      </div>\n    </section>\n    <div\n      class=\"install-banner\"\n      @click=\"addAToHomeScreen\"\n      v-show=\"showInstallation\"\n    >\n      <span class=\"guide\">喜欢我们的应用？点我添加桌面吧！</span>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.hello {\n  padding: 0 10px;\n}\n.install-banner {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 40px;\n  background: green;\n  color: #fff;\n  font-size: 16px;\n  text-align: center;\n  line-height: 40px;\n}\n.card {\n  padding-bottom: 20px;\n}\n</style>\n\n\n\n\n\n\n\n","import script from \"./HelloWorld.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HelloWorld.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HelloWorld.vue?vue&type=style&index=0&id=d4005ba0&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/travis/build/antwang/antwang.github.io/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d4005ba0\"]])\n\nexport default __exports__","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=13626f0c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","/*\n * @Author: ant\n * @Date: 2022-05-25 22:40:23\n * @LastEditTime: 2022-06-07 15:21:20\n * @LastEditors: ant\n * @Description: \n */\n/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n// import {subscribe,} from './utils/notification'\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}sw.js`, {\n    async ready() {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n      // 订阅推送消息\n      // subscribeAndDistribute(reg);\n      // sendPushSubscription(pushSubscription)\n      // todo: 调用接口，将订阅信息发送给业务服务器，待服务端提供\n    },\n    async registered() {\n      console.log('Service worker has been registered.')\n    },\n    cached() {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound() {\n      console.log('New content is downloading.')\n    },\n    updated() {\n      console.log('New content is available; please refresh.')\n    },\n    offline() {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error(error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}","/*\n * @Author: ant\n * @Date: 2022-05-25 22:40:23\n * @LastEditTime: 2022-06-06 14:16:12\n * @LastEditors: ant\n * @Description: \n */\n\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport './registerServiceWorker'\n\nimport VConsole from 'vconsole';\n\ncreateApp(App).mount('#app')\n\n// or init with options\nnew VConsole({ theme: 'dark' });","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpwa_vue3\"] = self[\"webpackChunkpwa_vue3\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(5384); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["base64ToUint8Array","base64String","padding","repeat","length","base64","replace","rawData","atob","outputArray","Uint8Array","i","charCodeAt","isNotificationSupported","window","isPushManagerSupported","getSWRegistration","async","reg","navigator","serviceWorker","ready","console","log","askPermission","permission","Notification","requestPermission","e","displayNotification","showNotification","msg","title","body","getPushScription","subscription","pushManager","getSubscription","subscribe","subscribeOptions","userVisibleOnly","JSON","stringify","unsubscribe","res","pushSubScription","msgs","icon","data","url","desc","actions","action","VAPIDPublicKey","savedPrompt","showInstallation","ref","pushInfo","subscribeText","pushSub","onMounted","value","subscribeOrUnsubscribe","applicationServerKey","showMsg","addEventListener","preventDefault","userChoice","outcome","addAToHomeScreen","prompt","__exports__","register","cached","updatefound","updated","offline","error","createApp","App","mount","VConsole","theme","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}